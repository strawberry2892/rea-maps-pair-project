<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Management System</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .button-group {
            margin: 20px 0;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        button {
            padding: 10px 15px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background: #0056b3;
        }

        .result {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #f9f9f9;
        }

        pre {
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .form-group {
            margin: 10px 0;
        }

        input {
            padding: 8px;
            width: 200px;
            margin-right: 10px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>üéì Student Management System</h1>

        <div class="button-group">
            <button onclick="testAPI()">–¢–µ—Å—Ç API</button>
            <button onclick="getUsers()">–ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</button>
            <button onclick="getGroups()">–ü–æ–ª—É—á–∏—Ç—å –≥—Ä—É–ø–ø—ã</button>
            <button onclick="getCourses()">–ü–æ–ª—É—á–∏—Ç—å –∫—É—Ä—Å—ã</button>
            <button onclick="getSchedules()">–ü–æ–ª—É—á–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</button>
            <button onclick="getAssignments()">–ü–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞–Ω–∏—è</button>
        </div>

        <h3>–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</h3>
        <div class="form-group">
            <input id="userEmail" placeholder="Email">
            <input id="userPassword" placeholder="–ü–∞—Ä–æ–ª—å" type="password">
            <input id="userFirstName" placeholder="–ò–º—è">
            <input id="userLastName" placeholder="–§–∞–º–∏–ª–∏—è">
            <select id="userRole">
                <option value="STUDENT">–°—Ç—É–¥–µ–Ω—Ç</option>
                <option value="TEACHER">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å</option>
                <option value="ADMIN">–ê–¥–º–∏–Ω</option>
            </select>
            <button onclick="createUser()">–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
        </div>

        <h3>–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É:</h3>
        <div class="form-group">
            <input id="groupName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã">
            <input id="groupYear" placeholder="–ì–æ–¥" type="number">
            <input id="groupFaculty" placeholder="–§–∞–∫—É–ª—å—Ç–µ—Ç">
            <input id="groupSpecialty" placeholder="–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å">
            <button onclick="createGroup()">–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É</button>
        </div>

        <div id="result" class="result">
            –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...
        </div>
    </div>

    <script>
        const API_URL = 'http://localhost:3000/api';

        function displayResult(data) {
            document.getElementById('result').innerHTML =
                `<pre>${JSON.stringify(data, null, 2)}</pre>`;
        }

        async function testAPI() {
            try {
                const response = await fetch(`${API_URL}/test`);
                const data = await response.json();
                displayResult(data);
            } catch (error) {
                displayResult({ error: error.toString() });
            }
        }

        async function getUsers() {
            const response = await fetch(`${API_URL}/users`);
            const data = await response.json();
            displayResult(data);
        }

        async function getGroups() {
            const response = await fetch(`${API_URL}/groups`);
            const data = await response.json();
            displayResult(data);
        }

        async function getCourses() {
            const response = await fetch(`${API_URL}/courses`);
            const data = await response.json();
            displayResult(data);
        }

        async function getSchedules() {
            const response = await fetch(`${API_URL}/schedules`);
            const data = await response.json();
            displayResult(data);
        }

        async function getAssignments() {
            const response = await fetch(`${API_URL}/assignments`);
            const data = await response.json();
            displayResult(data);
        }

        async function createUser() {
            const userData = {
                email: document.getElementById('userEmail').value,
                passwordHash: document.getElementById('userPassword').value,
                firstName: document.getElementById('userFirstName').value,
                lastName: document.getElementById('userLastName').value,
                role: document.getElementById('userRole').value
            };

            const response = await fetch(`${API_URL}/users`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(userData)
            });
            const data = await response.json();
            displayResult(data);
        }

        async function createGroup() {
            const groupData = {
                name: document.getElementById('groupName').value,
                year: document.getElementById('groupYear').value,
                faculty: document.getElementById('groupFaculty').value,
                specialty: document.getElementById('groupSpecialty').value
            };

            const response = await fetch(`${API_URL}/groups`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(groupData)
            });
            const data = await response.json();
            displayResult(data);
        }

        // –ê–≤—Ç–æ—Ç–µ—Å—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = testAPI;
    </script>
</body>

</html>